<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>BOSS RUSH: ARMORY</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { gap: 30px; }
        .container { display: flex; gap: 30px; width: 900px; }
        .skill-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; flex: 2;
        }
        .skill-card {
            background: #111; border: 2px solid #444; padding: 15px;
            border-radius: 8px; cursor: pointer; text-align: center; position: relative;
        }
        .skill-card:hover { border-color: #fff; background: #222; }
        .skill-card.selected { border-color: #0f0; background: #002200; }
        
        .key-badge {
            position: absolute; top: -10px; right: -10px;
            width: 30px; height: 30px; background: #fff; color: #000;
            border-radius: 50%; font-weight: bold; display: none;
            align-items: center; justify-content: center;
        }

        .info-panel {
            flex: 1; background: #111; border: 2px solid #0ff; padding: 20px;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .info-title { font-size: 24px; color: #0ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 10px; }
        .info-desc { color: #ccc; line-height: 1.6; font-size: 14px; flex-grow: 1; }
        
        .start-btn { width: 100%; padding: 20px; font-size: 24px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="logo neon-text" style="position:absolute; top: 30px;">SELECT 2 SKILLS</div>
    
    <div class="container">
        <div class="skill-grid" id="skill-list">
            </div>

        <div class="info-panel">
            <div>
                <div class="info-title" id="info-name">SKILL INFO</div>
                <div class="info-desc" id="info-desc">스킬에 마우스를 올려보세요.<br><br>클릭하여 선택합니다.<br>첫 번째 클릭: [Z] 키<br>두 번째 클릭: [X] 키</div>
            </div>
            <div>
                <div id="skill-note" style="margin-bottom:10px; font-size:13px; color:#888; min-height: 40px;">
                    * 패링(Space)은 기본 장착됩니다.
                </div>
                <button class="start-btn" onclick="startGame()">GAME START</button>
            </div>
        </div>
    </div>

    <script>
        // 스킬 데이터 (설명 + Note 추가됨 + 패링 추가됨)
        const skillsData = [
            { 
                id: 1, 
                name: "무적 (Invul)", 
                desc: "3초간 모든 공격을 무시합니다. (쿨타임: 12초)", 
                note: "* 사용 도중에 움직임이 느려짐" 
            },
            { 
                id: 2, 
                name: "가속 (TimeWarp)", 
                desc: "5초간 시간을 느리게 만듭니다. 정밀한 회피가 가능해집니다. (쿨타임: 18초)", 
                note: "* 가속 상태에선 공격이 불가, 보스의 탄환의 판정을 무시하는 것은 아님" 
            },
            { 
                id: 3, 
                name: "반사 (Reflect)", 
                desc: "주변의 탄환을 반사하여 적을 공격하는 유도탄으로 바꿉니다. (쿨타임: 27초)", 
                note: "* 광선 공격은 반사 불가" 
            },
            { 
                id: 4, 
                name: "방패 (Shield)", 
                desc: "전방에 탄환을 막을수록 확장되는 방벽을 설치합니다 (쿨타임: 25초)", 
                note: "* 광선 공격은 방어 불가" 
            },
            { 
                id: 5, 
                name: "레일건 (Railgun)", 
                desc: "전방으로 강력한 관통 레이저를 전면으로 발사합니다 (쿨타임: 11초)", 
                note: "* 전방으로 쏜다는 점을 주의" 
            },
            { 
                id: 7, 
                name: "정지 (Stop)", 
                desc: "게임의 시간을 4초간 멈춥니다. (쿨타임: 30초)", 
                note: "* 캐릭터의 탄환을 중첩하여 발사가 가능" 
            },
            { 
                id: 10, 
                name: "블랙홀 (Blackhole)", 
                desc: "주변 탄막을 빨아들이고 빨아들인 만큼의 위력을 지닌 대형 탄환을 쏘는 블랙홀을 생성합니다. (쿨타임: 24초)", 
                note: "* 위력 증가의 상하선이 존재함" 
            },
            { 
                id: 11, 
                name: "리콜 (Recall)", 
                desc: "시간을 5초 전으로 되돌립니다. (쿨타임: 15초)", 
                note: "* 점수도 되돌리는 점을 주의." 
            },
            { 
                id: 12, 
                name: "패링 (Parrying)", 
                desc: "적의 탄막을 쳐내어 무효화합니다. (쿨타임: 3초)", 
                note: "* 스페이스바를 눌러 발동합니다. (기본 장착)" 
            }
        ];

        let selectedSkills = []; // [id1, id2]

        const grid = document.getElementById('skill-list');
        const iName = document.getElementById('info-name');
        const iDesc = document.getElementById('info-desc');
        const iNote = document.getElementById('skill-note'); // Note 엘리먼트 가져오기

        skillsData.forEach(s => {
            const el = document.createElement('div');
            el.className = 'skill-card';
            el.innerHTML = `<div style="font-size:30px; margin-bottom:10px;">⚡</div><div>${s.name}</div><div class="key-badge"></div>`;
            
            // 마우스 오버 시 설명 및 노트 업데이트
            el.onmouseenter = () => {
                iName.innerText = s.name;
                iDesc.innerText = s.desc;
                // Note 업데이트 (없으면 기본 멘트)
                iNote.innerText = s.note ? s.note : "* 패링(Space)은 기본 장착됩니다.";
                iNote.style.color = "#fff"; // 텍스트 색상을 밝게 강조
            };

            // 마우스가 떠날 때 (선택사항: 원하신다면 기본 멘트로 복귀하게 할 수도 있음)
            // el.onmouseleave = () => { ... }

            // 클릭 시 선택/해제 로직
            el.onclick = () => {
                // 패링(12번)은 선택 불가 (기본 스킬이므로)
                if(s.id === 12) {
                    alert("패링은 기본 스킬입니다. 다른 스킬을 선택해주세요!");
                    return;
                }

                const idx = selectedSkills.indexOf(s.id);
                if (idx > -1) {
                    // 이미 선택됨 -> 해제
                    selectedSkills.splice(idx, 1);
                } else {
                    // 선택 안됨 -> 추가 (최대 2개)
                    if (selectedSkills.length < 2) {
                        selectedSkills.push(s.id);
                    } else {
                        // 꽉 찼으면 첫번째꺼 빼고 넣기 (교체)
                        selectedSkills.shift();
                        selectedSkills.push(s.id);
                    }
                }
                renderSelection();
            };
            
            // ID 저장
            el.dataset.id = s.id;
            grid.appendChild(el);
        });

        function renderSelection() {
            const cards = document.querySelectorAll('.skill-card');
            cards.forEach(c => {
                const sid = parseInt(c.dataset.id);
                const sIdx = selectedSkills.indexOf(sid);
                const badge = c.querySelector('.key-badge');
                
                if (sIdx > -1) {
                    c.classList.add('selected');
                    badge.style.display = 'flex';
                    badge.innerText = sIdx === 0 ? 'Z' : 'X';
                    badge.style.background = sIdx === 0 ? '#fff' : '#ffd700'; // Z는 흰색, X는 골드
                } else {
                    c.classList.remove('selected');
                    badge.style.display = 'none';
                }
            });
        }

        function startGame() {
            // 아무것도 선택 안해도 됨. 선택한 것만 저장
            localStorage.setItem('bossRush_skills', JSON.stringify(selectedSkills));
            location.href = 'index.html';
        }
    </script>
</body>
</html>
